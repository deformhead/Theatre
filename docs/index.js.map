{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./sources/game/components/demo/direction.js","webpack:///./sources/theatre/modules/world.js","webpack:///./sources/game/components/demo/spritesheet.js","webpack:///./sources/game/components/demo/image.js","webpack:///./sources/game/scenes/loading/index.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///./sources/game/scenes/loading/destroy.js","webpack:///./sources/game/scenes/loading/render.js","webpack:///./sources/game/scenes/loading/setup.js","webpack:///./sources/game/scenes/loading/start.js","webpack:///./sources/game/scenes/loading/update.js","webpack:///./sources/game/scenes/demo/index.js","webpack:///./sources/game/scenes/demo/destroy.js","webpack:///./sources/game/components/demo/position.js","webpack:///./sources/game/scenes/demo/start.js","webpack:///./sources/game/components/demo/input.js","webpack:///./sources/game/components/demo/text.js","webpack:///./sources/game/components/demo/framerate.js","webpack:///./sources/game/components/demo/alphabet.js","webpack:///./sources/game/systems/demo/animate.js","webpack:///./sources/game/components/demo/animation.js","webpack:///./sources/game/components/demo/run.js","webpack:///./sources/game/systems/demo/input.js","webpack:///./sources/game/systems/demo/reframe.js","webpack:///./sources/game/scenes/demo/update.js","webpack:///./sources/game/systems/demo/framerate.js","webpack:///./sources/game/systems/demo/image.js","webpack:///./sources/game/systems/demo/text.js","webpack:///./sources/game/scenes/demo/render.js","webpack:///./sources/theatre/modules/keynames.js","webpack:///./sources/theatre/modules/keycodes.js","webpack:///./sources/game/scenes/demo/setup.js","webpack:///./sources/theatre/modules/keyboard.js","webpack:///./sources/game/assets/images/demo/font-16x32@2x.png","webpack:///./sources/game/assets/images/demo/wizard-16x16@2x.png","webpack:///./sources/game/assets/datasets/index.js","webpack:///./sources/game/assets/images/index.js","webpack:///./sources/game/assets/index.js","webpack:///./sources/index.js","webpack:///./sources/theatre/core/theatre.js","webpack:///./sources/theatre/core/canvas.js","webpack:///./sources/theatre/core/loop.js","webpack:///./sources/theatre/core/preload.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Direction","direction","this","__webpack_exports__","Entity","components","add","_this","forEach","component","has","iterator","length","search","replace","exlude","remove","World","context","entities","entity","push","current","splice","indexOf","system","handler","arguments","undefined","Spritesheet","spritesheet","Image","image","size","frame","_destroy_js__WEBPACK_IMPORTED_MODULE_0__","_render_js__WEBPACK_IMPORTED_MODULE_1__","_setup_js__WEBPACK_IMPORTED_MODULE_2__","_start_js__WEBPACK_IMPORTED_MODULE_3__","_update_js__WEBPACK_IMPORTED_MODULE_4__","hot","accept","originalModule","webpackPolyfill","children","destroy","console","log","state","redirect","render","fillStyle","fillRect","width","height","font","textAlign","textBaseline","fillText","preloading","setup","start","update","setTimeout","load","keyboard","inputs","world","Position","x","y","demo_image","assets","images","demo","datasets","text","elapsed","frames","animate","animationComponent","delta","duration","framerate","Animation","Run","input_input","input","directionComponent","imageComponent","inputComponent","spritesheetComponent","action","reframe","framerateComponent","Math","round","image_image","positionComponent","drawImage","text_text","alphabetComponent","split","character","index","keynames","LEFT","UP","RIGHT","DOWN","setup_setup","codes","names","states","blur","type","keydown","event","code","keyCode","preventDefault","keyup","addEventListener","removeEventListener","scope","source","images_images","assets_assets","concat","_toConsumableArray","config","container","scenes","expose","sharp","speed","loading","restarting","version","scene","restart","canvas","identifier","element","document","createElement","getContext","ratio","window","devicePixelRatio","setAttribute","style","scale","imageRendering","imageSmoothingEnabled","appendChild","loop","elapsedTime","lastRender","lastUpdate","currentRender","Date","now","requestAnimationFrame","currentUpdate","max","timeframe","promises","asset","promise","Promise","resolve","reject","src","onload","sound","Audio","oncanplaythrough","cloneNode","all","then","preload","theatre","body","scenes_namespaceObject"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,mCClFA,SAASC,EAAUC,GAEfC,KAAK3B,KAAO,YAEZ2B,KAAKD,UAAYA,EAJrBrC,EAAAU,EAAA6B,EAAA,sBAAAH,kCCAA,SAASI,EAAO7B,EAAM8B,GA6ClBH,KAAKG,cACLH,KAAK3B,KAAOA,EAEZ2B,KAAKI,IA9CL,SAAaD,GAAY,IAAAE,EAAAL,KAErBG,EAAWG,QAAQ,SAACC,GAEhBF,EAAKF,WAAWI,EAAUlC,MAAQkC,KA2C1CP,KAAKrB,IAvCL,SAAa4B,GAET,OAAOP,KAAKG,WAAWI,IAsC3BP,KAAKQ,IAnCL,SAAaL,GAET,IAAK,IAAIM,EAAW,EAAGC,EAASP,EAAWO,OAAQD,EAAWC,EAAQD,GAAY,EAAG,CAEjF,IAAME,EAASR,EAAWM,GACpBF,EAAYI,EAAOC,QAAQ,OAAQ,IACnCC,EAASF,IAAWJ,EAE1B,GAAIP,KAAKG,WAAWR,eAAeY,KAAeM,EAE9C,OAAO,EAIf,OAAO,GAsBXb,KAAKc,OAnBL,SAAgBX,GAEZ,IAAK,IAAIM,EAAW,EAAGC,EAASP,EAAWO,OAAQD,EAAWC,EAAQD,GAAY,EAAG,CAEjF,IAAMF,EAAYJ,EAAWM,IAEqB,IAA9CT,KAAKG,WAAWR,eAAeY,WAExBP,KAAKG,WAAWI,KAanCP,KAAKI,IAAID,GAGb,SAASY,EAAMC,GAoCXhB,KAAKiB,YAELjB,KAAKI,IApCL,SAAac,GAETlB,KAAKiB,SAASE,KAAKD,IAmCvBlB,KAAKrB,IAhCL,SAAauC,GAET,IAAK,IAAIT,EAAW,EAAGC,EAASV,KAAKiB,SAASP,OAAQD,EAAWC,EAAQD,GAAY,EAAG,CAEpF,IAAMW,EAAUpB,KAAKiB,SAASR,GAE9B,GAAIW,EAAQ/C,OAAS6C,EAEjB,OAAOE,IAyBnBpB,KAAKc,OApBL,SAAgBI,GAEZlB,KAAKiB,SAASI,OAAOrB,KAAKiB,SAASK,QAAQJ,GAAS,IAmBxDlB,KAAKuB,OAhBL,SAAgBpB,EAAYqB,IAAmCC,UAAAf,OAAA,QAAAgB,IAAAD,UAAA,GAAAA,UAAA,GAAfzB,KAAKiB,UAExCX,QAAQ,SAACY,IAEiB,IAA3BA,EAAOV,IAAIL,IAEXqB,EAAQvD,KAAK+C,EAASE,MAvFtCxD,EAAAU,EAAA6B,EAAA,sBAAAc,IAAArD,EAAAU,EAAA6B,EAAA,sBAAAC,kCCAA,SAASyB,EAAYC,GAEjB5B,KAAK3B,KAAO,cAEZ2B,KAAK4B,YAAcA,EAJvBlE,EAAAU,EAAA6B,EAAA,sBAAA0B,kCCAA,SAASE,EAAMC,EAAOC,EAAMC,GAExBhC,KAAK3B,KAAO,QAEZ2B,KAAK8B,MAAQA,EACb9B,KAAK+B,KAAOA,EACZ/B,KAAKgC,MAAQA,EANjBtE,EAAAU,EAAA6B,EAAA,sBAAA4B,kCCAAnE,EAAAkB,EAAAqB,GAAA,SAAApC,GAAA,IAAAoE,EAAAvE,EAAA,GAAAA,EAAAU,EAAA6B,EAAA,4BAAAgC,EAAA,QAAAC,EAAAxE,EAAA,GAAAA,EAAAU,EAAA6B,EAAA,2BAAAiC,EAAA,QAAAC,EAAAzE,EAAA,GAAAA,EAAAU,EAAA6B,EAAA,0BAAAkC,EAAA,QAAAC,EAAA1E,EAAA,GAAAA,EAAAU,EAAA6B,EAAA,0BAAAmC,EAAA,QAAAC,EAAA3E,EAAA,IAAAA,EAAAU,EAAA6B,EAAA,2BAAAoC,EAAA,SAM0B,IAAfxE,EAAOyE,KAEdzE,EAAOyE,IAAIC,QAEP,eACA,cACA,aACA,aACA,mDCdR1E,EAAOD,QAAU,SAAS4E,GACzB,IAAKA,EAAeC,gBAAiB,CACpC,IAAI5E,EAASW,OAAOY,OAAOoD,GAEtB3E,EAAO6E,WAAU7E,EAAO6E,aAC7BlE,OAAOC,eAAeZ,EAAQ,UAC7Ba,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOE,KAGhBS,OAAOC,eAAeZ,EAAQ,MAC7Ba,YAAY,EACZC,IAAK,WACJ,OAAOd,EAAOC,KAGhBU,OAAOC,eAAeZ,EAAQ,WAC7Ba,YAAY,IAEbb,EAAO4E,gBAAkB,EAE1B,OAAO5E,iCCtBR,SAAS8E,IAELC,QAAQC,IAAI,yBACZD,QAAQC,IAAI,kBAEL7C,KAAK8C,MAAMC,SALtBrF,EAAAU,EAAA6B,EAAA,sBAAA0C,kCCAA,SAASK,IAILhD,KAAKgB,QAAQiC,UAAY,UACzBjD,KAAKgB,QAAQkC,SAAS,EAAG,EAAGlD,KAAK+B,KAAKoB,MAAOnD,KAAK+B,KAAKqB,QAEvDpD,KAAKgB,QAAQqC,KAAO,mBACpBrD,KAAKgB,QAAQsC,UAAY,QACzBtD,KAAKgB,QAAQuC,aAAe,MAC5BvD,KAAKgB,QAAQiC,UAAY,UACzBjD,KAAKgB,QAAQwC,SAAS,YAAa,EAAG,GACtCxD,KAAKgB,QAAQiC,UAAY,UAEzBjD,KAAKgB,QAAQwC,SAAS,yBAA0B,EAAG,KAE3B,IAApBxD,KAAKyD,aAELzD,KAAKgB,QAAQwC,SAAS,yBAA0B,EAAG,IACnDxD,KAAKgB,QAAQwC,SAAS,0BAA2B,EAAG,KAnB5D9F,EAAAU,EAAA6B,EAAA,sBAAA+C,kCCAA,SAASU,IAELd,QAAQC,IAAI,uBAFhBnF,EAAAU,EAAA6B,EAAA,sBAAAyD,kCCAA,SAASC,IAELf,QAAQC,IAAI,uBAEZ7C,KAAK8C,MAAMC,UAAW,EAJ1BrF,EAAAU,EAAA6B,EAAA,sBAAA0D,kCCAA,SAASC,IAAS,IAAAvD,EAAAL,MAIU,IAApBA,KAAKyD,aAAgD,IAAxBzD,KAAK8C,MAAMC,WAExCc,WAAW,WAEPxD,EAAKyD,KAAK,SAEX,KAEH9D,KAAK8C,MAAMC,UAAW,GAZ9BrF,EAAAU,EAAA6B,EAAA,sBAAA2D,kCCAAlG,EAAAkB,EAAAqB,GAAA,SAAApC,GAAA,IAAAoE,EAAAvE,EAAA,IAAAA,EAAAU,EAAA6B,EAAA,4BAAAgC,EAAA,QAAAC,EAAAxE,EAAA,IAAAA,EAAAU,EAAA6B,EAAA,2BAAAiC,EAAA,QAAAC,EAAAzE,EAAA,IAAAA,EAAAU,EAAA6B,EAAA,0BAAAkC,EAAA,QAAAC,EAAA1E,EAAA,IAAAA,EAAAU,EAAA6B,EAAA,0BAAAmC,EAAA,QAAAC,EAAA3E,EAAA,IAAAA,EAAAU,EAAA6B,EAAA,2BAAAoC,EAAA,SAM0B,IAAfxE,EAAOyE,KAEdzE,EAAOyE,IAAIC,QAEP,eACA,cACA,aACA,aACA,kECdR,SAASI,IAELC,QAAQC,IAAI,sBAEZ7C,KAAK+D,SAASpB,iBAEP3C,KAAKgE,cACLhE,KAAKiE,aAELjE,KAAK+D,SAEZnB,QAAQC,IAAI,WAXhBnF,EAAAU,EAAA6B,EAAA,sBAAA0C,mECAA,SAASuB,EAASC,EAAGC,GAEjBpE,KAAK3B,KAAO,WAEZ2B,KAAKmE,EAAIA,EACTnE,KAAKoE,EAAIA,aCMb,SAAST,IAELf,QAAQC,IAAI,oBAEZ7C,KAAKgE,OAAOtD,OAAS,EACrBV,KAAKiE,MAAQ,IAAIA,EAAA,EAAMjE,MAEvBA,KAAKiE,MAAM7D,IAAI,IAAI6D,EAAA,EAAO,QAEtB,IAAIlE,EAAA,EAAU,QACd,IAAIsE,EAAA,EAAMrE,KAAKsE,OAAOC,OAAOC,KAAnB,UAAsC,GAAI,KAAM,EAAG,IAC7D,ICtBR,SAAeR,GAEXhE,KAAK3B,KAAO,QAEZ2B,KAAKgE,OAASA,EDkBV,EAAW,SAAU,YAAa,WAAY,aAC9C,IAAIE,EAASlE,KAAK+B,KAAKoB,MAAQ,EAAI,GAAInD,KAAK+B,KAAKqB,OAAS,EAAI,IAC9D,IAAIxB,EAAA,EAAY5B,KAAKsE,OAAOG,SAASD,KAArB,aAGpBxE,KAAKiE,MAAM7D,IAAI,IAAI6D,EAAA,EAAO,aAEtB,IAAIC,EAAS,EAAG,GAChB,IE9BR,SAAcQ,GAEV1E,KAAK3B,KAAO,OAEZ2B,KAAK0E,KAAOA,EF0BR,CAAS,UACT,IG/BR,WAEI1E,KAAK3B,KAAO,YAEZ2B,KAAK2E,QAAU,EACf3E,KAAK4E,OAAS,GH2BV,IIhCR,SAAkB9C,EAAOC,GAErB/B,KAAK3B,KAAO,WAEZ2B,KAAK8B,MAAQA,EACb9B,KAAK+B,KAAOA,EJ2BR,CAAa/B,KAAKsE,OAAOC,OAAOC,KAAnB,QAAoC,GAAI,KACrD,IAAI5C,EAAA,EAAY5B,KAAKsE,OAAOG,SAASD,KAArB,WAjCxB9G,EAAAU,EAAA6B,EAAA,sBAAA0D,uCKAA,SAASkB,EAAQ3D,GAEb,IAAM4D,EAAqB5D,EAAOvC,IAAI,aAEtC,GAAImG,EAAmBF,OAAOlE,OAAS,EAAG,CAEtCoE,EAAmBH,SAAW3E,KAAK+E,MAAMnB,OAIzC,IAFA,IAAMoB,EAAW,IAAOF,EAAmBG,UAEpCH,EAAmBH,SAAWK,GAEjCF,EAAmBH,SAAWK,EAC9BF,EAAmB9C,MAAS8C,EAAmB9C,QAAU8C,EAAmBF,OAAOlE,OAAS,EAAK,EAAIoE,EAAmB9C,MAAQ,EAChI8C,EAAmB1D,QAAU0D,EAAmBF,OAAOE,EAAmB9C,QCdtF,SAASkD,EAAUN,EAAQK,GAEvBjF,KAAK3B,KAAO,YAEZ2B,KAAKiF,UAAYA,GAAa,EAC9BjF,KAAK4E,OAASA,EAEd5E,KAAKgC,MAAQ,EACbhC,KAAKoB,QAAUpB,KAAK4E,OAAO5E,KAAKgC,OAChChC,KAAK2E,QAAU,kBCTnB,SAASQ,IAELnF,KAAK3B,KAAO,WCIhB,SAAS+G,EAAMlE,GAEXlB,KAAKgE,OAAO1D,QAAQ,SAAC+E,GAEjB,IAAMC,EAAqBpE,EAAOvC,IAAI,aAChC4G,EAAiBrE,EAAOvC,IAAI,SAC5B6G,EAAiBtE,EAAOvC,IAAI,SAC5B8G,EAAuBvE,EAAOvC,IAAI,eAExC,IAAqD,IAAjD6G,EAAexB,OAAO1C,QAAQ+D,EAAMK,SACrB,SAAhBL,EAAMvC,MAEL,OAAQuC,EAAMK,QAEV,IAAK,SAEDxE,EAAOd,KAEH,IAAI+E,EACJ,IAAIpF,EAAA,EAAU,MACd,IAAImF,EAAUO,EAAqB7D,YAArB,UAGtB,MAEA,IAAK,YAEDV,EAAOd,KAEH,IAAI+E,EACJ,IAAIpF,EAAA,EAAU,SACd,IAAImF,EAAUO,EAAqB7D,YAArB,aAGtB,MAEA,IAAK,WAEDV,EAAOd,KAEH,IAAI+E,EACJ,IAAIpF,EAAA,EAAU,QACd,IAAImF,EAAUO,EAAqB7D,YAArB,YAGtB,MAEA,IAAK,WAEDV,EAAOd,KAEH,IAAI+E,EACJ,IAAIpF,EAAA,EAAU,QACd,IAAImF,EAAUO,EAAqB7D,YAArB,iBAOzB,IAA4B,IAAxBV,EAAOV,KAAK,UAC+B,IAAjDgF,EAAexB,OAAO1C,QAAQ+D,EAAMK,SACpB,OAAhBL,EAAMvC,MAEL,OAAQuC,EAAMK,QAEV,IAAK,SAEoC,OAAjCJ,EAAmBvF,YAEnBmB,EAAOJ,QAAQ,YAAa,QAC5ByE,EAAevD,MAAQyD,EAAqB7D,YAArB,SAG/B,MAEA,IAAK,YAEoC,UAAjC0D,EAAmBvF,YAEnBmB,EAAOJ,QAAQ,YAAa,QAC5ByE,EAAevD,MAAQyD,EAAqB7D,YAArB,YAG/B,MAEA,IAAK,WAEoC,SAAjC0D,EAAmBvF,YAEnBmB,EAAOJ,QAAQ,YAAa,QAC5ByE,EAAevD,MAAQyD,EAAqB7D,YAArB,WAG/B,MAEA,IAAK,WAEoC,SAAjC0D,EAAmBvF,YAEnBmB,EAAOJ,QAAQ,YAAa,QAC5ByE,EAAevD,MAAQyD,EAAqB7D,YAArB,cC3G/C,SAAS+D,EAAQzE,GAEbA,EAAOvC,IAAI,SAASqD,MAAQd,EAAOvC,IAAI,aAAayC,QCIxD,SAASwC,IAIL5D,KAAKiE,MAAM1C,QAAQ,SAAU6D,GAC7BpF,KAAKiE,MAAM1C,QAAQ,aAAcsD,GACjC7E,KAAKiE,MAAM1C,QAAQ,YAAa,SAAUoE,GAE1C3F,KAAKgE,OAAOtD,OAAS,EAdzBhD,EAAAU,EAAA6B,EAAA,sBAAA2D,uCCAA,SAASqB,EAAU/D,GAEf,IAAM0E,EAAqB1E,EAAOvC,IAAI,aAEtCiH,EAAmBjB,SAAW3E,KAAK+E,MAAM/B,OACzC4C,EAAmBhB,QAAU,EAEzBgB,EAAmBjB,SAAW,MAE9BzD,EAAOvC,IAAI,QAAQ+F,KAAO,OAASmB,KAAKC,MAAkC,IAA5BF,EAAmBhB,OAAgBgB,EAAmBjB,SACpGiB,EAAmBjB,QAAU,EAC7BiB,EAAmBhB,OAAS,GCXpC,SAASmB,EAAM7E,GAEX,IAAMqE,EAAiBrE,EAAOvC,IAAI,SAC5BqH,EAAoB9E,EAAOvC,IAAI,YAErCqB,KAAKgB,QAAQiF,UAETV,EAAezD,MACfyD,EAAevD,MAAM,GAAKuD,EAAexD,KAAK,GAAIwD,EAAevD,MAAM,GAAKuD,EAAexD,KAAK,GAAIwD,EAAexD,KAAK,GAAIwD,EAAexD,KAAK,GAChJiE,EAAkB7B,EAAG6B,EAAkB5B,EAAGmB,EAAexD,KAAK,GAAIwD,EAAexD,KAAK,ICT9F,SAASmE,EAAKhF,GAAQ,IAAAb,EAAAL,KAEZmG,EAAoBjF,EAAOvC,IAAI,YAC/BqH,EAAoB9E,EAAOvC,IAAI,YAC/B8G,EAAuBvE,EAAOvC,IAAI,eAClBuC,EAAOvC,IAAI,QAEnB+F,KAAK0B,MAAM,IAAI9F,QAAQ,SAAC+F,EAAWC,GAE7CjG,EAAKW,QAAQiF,UAETE,EAAkBrE,MAClB2D,EAAqB7D,YAAYyE,GAAW,GAAKF,EAAkBpE,KAAK,GAAI0D,EAAqB7D,YAAYyE,GAAW,GAAKF,EAAkBpE,KAAK,GAAIoE,EAAkBpE,KAAK,GAAIoE,EAAkBpE,KAAK,GAC1MiE,EAAkB7B,EAAImC,EAAQH,EAAkBpE,KAAK,GAAIiE,EAAkB5B,EAAG+B,EAAkBpE,KAAK,GAAIoE,EAAkBpE,KAAK,MCP5I,SAASiB,IAILhD,KAAKgB,QAAQiC,UAAY,UACzBjD,KAAKgB,QAAQkC,SAAS,EAAG,EAAGlD,KAAK+B,KAAKoB,MAAOnD,KAAK+B,KAAKqB,QAEvDpD,KAAKiE,MAAM1C,QAAQ,aAAc0D,GACjCjF,KAAKiE,MAAM1C,QAAQ,QAAS,YAAawE,GACzC/F,KAAKiE,MAAM1C,QAAQ,WAAY,YAAa2E,GAfhDxI,EAAAU,EAAA6B,EAAA,sBAAA+C,kCCAA,IAAMuD,KAENA,EAAS,GAAK,MACdA,EAAS,IAAM,QACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OACfA,EAAS,IAAM,MACfA,EAAS,IAAM,MACfA,EAAS,IAAM,QAEfA,EAAS,IAAM,OACfA,EAAS,IAAM,KACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OAEfA,EAAS,IAAM,OACfA,EAAS,IAAM,MACfA,EAAS,IAAM,MACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OACfA,EAAS,IAAM,OACfA,EAAS,IAAM,MACfA,EAAS,IAAM,QACfA,EAAS,IAAM,QACfA,EAAS,IAAM,OAEfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,IACfA,EAAS,IAAM,ICnDf,IAQMC,EAAO,GACPC,EAAK,GACLC,EAAQ,GACRC,EAAO,GCRb,SAASC,IAELhE,QAAQC,IAAI,oBAEZ7C,KAAKgE,UAELhE,KAAK+D,SAAW,ICPpB,SAAkB8C,EAAO7C,GAErB,IAAM8C,KACAC,KAEN,SAASC,IAEL,IAAK,IAAIlE,KAASiE,EAEVA,EAAOpH,eAAemD,KACL,IAAlBiE,EAAOjE,KAENiE,EAAOjE,IAAS,EAEhBkB,EAAO7C,MAEH8F,KAAQ,WACRvB,OAAU5C,EACVA,MAAS,QAazB,SAASoE,EAAQC,GAEb,IAAMC,EAAOD,EAAME,QACbf,EAAQO,EAAMvF,QAAQ8F,IAEb,IAAXd,IACwB,IAAzBS,EAAOD,EAAMR,MAEZa,EAAMG,iBAENP,EAAOD,EAAMR,KAAU,EAEvBtC,EAAO7C,MAEH8F,KAAQ,WACRvB,OAAUoB,EAAMR,GAChBxD,MAAS,UAKrB,SAASyE,EAAMJ,GAEX,IAAMC,EAAOD,EAAME,QACbf,EAAQO,EAAMvF,QAAQ8F,IAEb,IAAXd,IACwB,IAAzBS,EAAOD,EAAMR,MAEZa,EAAMG,iBAENP,EAAOD,EAAMR,KAAU,EAEvBtC,EAAO7C,MAEH8F,KAAQ,WACRvB,OAAUoB,EAAMR,GAChBxD,MAAS,QAKrB,SAASY,IAEL8D,iBAAiB,OAAQR,GACzBQ,iBAAiB,UAAWN,GAC5BM,iBAAiB,QAASD,GAG9BV,EAAMvG,QAAQ,SAAC8G,GAEX,QAA8B,IAAnBb,EAASa,GAAuB,CAEvC,IAAM/I,EAAO,OAASkI,EAASa,GAE/BP,EAAM1F,KAAKiG,GACXN,EAAM3F,KAAK9C,GAEX0I,EAAO1I,IAAQ,KAIvBqF,EAAMzF,KAAK+B,MAEXA,KAAK2C,QAvEL,WAEI8E,oBAAoB,OAAQT,GAC5BS,oBAAoB,UAAWP,GAC/BO,oBAAoB,QAASF,IAoEjCvH,KAAK0D,MAAQA,EDzFG,EAAc+C,EAAIC,EAAOC,EAAMH,GAAOxG,KAAKgE,QAT/DtG,EAAAU,EAAA6B,EAAA,sBAAA2G,oYEAA/I,EAAAD,QAAA,goPCAAC,EAAAD,QAAA,2nECAA,IAAM6G,IAGEpG,KAAQ,OACRqJ,MAAS,OACTC,OAAUjK,EAAQ,IAClBuJ,KAAQ,YAGR5I,KAAQ,SACRqJ,MAAS,OACTC,OAAUjK,EAAQ,IAClBuJ,KAAQ,YCZVW,IAGEvJ,KAAQ,OACRqJ,MAAS,OACTC,OAAUjK,EAAQ,IAClBuJ,KAAQ,UAGR5I,KAAQ,SACRqJ,MAAS,OACTC,OAAUjK,EAAQ,IAClBuJ,KAAQ,+VCRhB,IAAMY,KAAMC,OAAAC,EAELtD,GAFKsD,EAGLH,GAHKG,sBCCZ,ICDA,SAAiBC,GAAQ,IAEd1D,EAAmC0D,EAAnC1D,OAAQ2D,EAA2BD,EAA3BC,UAAWC,EAAgBF,EAAhBE,OAAQnG,EAAQiG,EAARjG,KAE5BoG,EAASH,EAAOG,SAAU,EAC1BlD,EAAY+C,EAAO/C,WAAa,GAChCmD,EAAQJ,EAAOI,QAAS,EACxBC,EAAQL,EAAOK,OAAS,EAE1BC,EAAU,KACVC,GAAa,EA+FjBvI,KAAKyD,YAAa,EAClBzD,KAAKkI,OAASA,EACdlI,KAAK+B,KAAOA,EACZ/B,KAAK8C,SACL9C,KAAKwI,QAAU,SAEfxI,KAAK8D,KAhBL,SAAc2E,GAEVH,EAAUG,GAedzI,KAAK0I,QAZL,WAEIH,GAAa,GA1FjB,WAAsB,IAAAlI,EAAAL,KAEZ2I,EAAS,IClBvB,SAAgB1B,EAAM2B,EAAYzF,EAAOC,GAErC,IAAMyF,EAAUC,SAASC,cAAc,UACjC/H,EAAU6H,EAAQG,WAAW/B,GAC7BgC,EAAQC,OAAOC,kBAAoB,EAWzCN,EAAQO,aAAa,KAAMR,GAC3BC,EAAQO,aAAa,SAAUH,EAAQ7F,GACvCyF,EAAQO,aAAa,QAASH,EAAQ9F,GAEtC0F,EAAQQ,MAAMjG,OAASA,EAAS,KAChCyF,EAAQQ,MAAMlG,MAAQA,EAAQ,KAE9BnC,EAAQsI,MAAML,EAAOA,GAErBjJ,KAAKgB,QAAUA,EACfhB,KAAK6I,QAAUA,EACf7I,KAAKoI,MApBL,WAEIpI,KAAK6I,QAAQQ,MAAME,eAAiB,mBACpCvJ,KAAK6I,QAAQQ,MAAME,eAAiB,sBACpCvJ,KAAK6I,QAAQQ,MAAME,eAAiB,cACpCvJ,KAAK6I,QAAQQ,MAAME,eAAiB,YACpCvJ,KAAKgB,QAAQwI,uBAAwB,GDMtB,CAAW,KAAM,UAAWzH,EAAKoB,MAAOpB,EAAKqB,SAE9C,IAAVgF,GAEAO,EAAOP,QAGXH,EAAUwB,YAAYd,EAAOE,SAE7B7I,KAAKiI,UAAYA,EACjBjI,KAAKgB,QAAU2H,EAAO3H,QACtBhB,KAAK6I,QAAUF,EAAOE,QAEtB7I,KAAKsE,UACLtE,KAAK+E,SACL/E,KAAK+E,MAAM/B,OAAS,EACpBhD,KAAK+E,MAAMnB,OAAS,EAEpB5D,KAAKyI,MAAQzI,KAAKkI,OAAOI,QACzBtI,KAAKyI,MAAM/E,MAAMzF,KAAK+B,MACtBA,KAAKyI,MAAM9E,MAAM1F,KAAK+B,MAEtB,IAAM0J,EAAO,IExCrB,WAAyC,IAA3BzE,EAA2BxD,UAAAf,OAAA,QAAAgB,IAAAD,UAAA,GAAAA,UAAA,GAAf,GAAI4G,EAAW5G,UAAAf,OAAA,QAAAgB,IAAAD,UAAA,GAAAA,UAAA,GAAH,EAE9BkI,EAAc,EACdC,EAAa,KACbC,EAAa,KA0CjB7J,KAAKiF,UAAYA,EACjBjF,KAAKqI,MAAQA,EAEbrI,KAAKgD,OA3CL,SAAgBxB,GAEZ,IAAMsI,EAAgBC,KAAKC,MAER,OAAfJ,GAEApI,EAAQsI,EAAgBF,GAI5BK,sBAAsBjK,KAAKgD,OAAO1D,KAAKU,KAAMwB,IAE7CoI,EAAaE,GAgCjB9J,KAAK4D,OA7BL,SAAgBpC,GAEZ,IAAM0I,EAAgBH,KAAKC,MAS3B,IAPmB,OAAfH,IAGAF,GAAeO,EAAgBL,GAI5BF,GAAe,IAAO3J,KAAKiF,UAAYjF,KAAKqI,OAG/CsB,GAAe,IAAO3J,KAAKiF,UAAYjF,KAAKqI,MAE5C7G,EAAQ,IAAOxB,KAAKiF,WAGxB4E,EAAaK,EAGbrG,WAAW7D,KAAK4D,OAAOtE,KAAKU,KAAMwB,GAAU,IAAOqE,KAAKsE,IAAInK,KAAKiF,UAAW,MFH/D,CAASA,EAAWoD,GAEjCqB,EAAK9F,OAAO,SAACwG,GAKT,OAHA/J,EAAK0E,MAAMnB,OAASwG,EACpB/J,EAAKoI,MAAM7E,OAAO3F,KAAKoC,IAEJ,IAAfkI,GAEAlI,EAAKoI,MAAM9E,MAAM1F,KAAKoC,QAEtBkI,GAAa,IAKD,OAAZD,GAEAjI,EAAKoI,MAAM9F,QAAQ1E,KAAKoC,GACxBA,EAAKoI,MAAQpI,EAAK6H,OAAOI,GACzBjI,EAAKoI,MAAM/E,MAAMzF,KAAKoC,GACtBA,EAAKoI,MAAM9E,MAAM1F,KAAKoC,QAEtBiI,EAAU,YAPd,IAaJoB,EAAK1G,OAAO,SAACoH,GAET/J,EAAK0E,MAAM/B,OAASoH,EACpB/J,EAAKoI,MAAMzF,OAAO/E,KAAKoC,KGxEnC,SAAiBiE,EAAQ9C,GAErB,IAAI6I,KAGJ/F,EAAOhE,QAAQ,SAAUgK,GAGrB,IAAMC,EAAU,IAAIC,QAAQ,SAAUC,EAASC,GAW3C,GARmB,YAAfJ,EAAMrD,OAENqD,EAAMhM,OAAS,kBAAMgM,EAAM3C,QAE3B8C,EAAQH,IAIO,UAAfA,EAAMrD,KAAkB,CAExB,IAAMnF,EAAQ,IAAID,MAElBC,EAAM6I,IAAML,EAAM3C,OAGlB7F,EAAM8I,OAAS,WAEXN,EAAMhM,OAAS,kBAAMwD,GAErB2I,EAAQH,SAKX,GAAmB,UAAfA,EAAMrD,KAAkB,CAE7B,IAAM4D,EAAQ,IAAIC,MAAMR,EAAM3C,QAG9BkD,EAAME,iBAAmB,WAErBT,EAAMhM,OAAS,kBAAMuM,EAAMG,aAE3BP,EAAQH,OAKpBD,EAASlJ,KAAKoJ,KAIlBC,QAAQS,IAAIZ,GAAUa,KAAK1J,GHsBvB2J,CAAQ7G,EAAQ,SAACA,GAEbA,EAAOhE,QAAQ,SAACgK,QAEiC,IAAlCjK,EAAKiE,OAAOgG,EAAMrD,KAAO,OAEhC5G,EAAKiE,OAAOgG,EAAMrD,KAAO,cAG6B,IAA/C5G,EAAKiE,OAAOgG,EAAMrD,KAAO,KAAKqD,EAAM5C,SAE3CrH,EAAKiE,OAAOgG,EAAMrD,KAAO,KAAKqD,EAAM5C,WAGxCrH,EAAKiE,OAAOgG,EAAMrD,KAAO,KAAKqD,EAAM5C,OAAO4C,EAAMjM,MAAQiM,EAAMhM,SAGnE+B,EAAKoD,YAAa,IAGtBzD,KAAK0J,KAAOA,EACZ1J,KAAKyD,YAAa,GAsBXxF,KAAK+B,KAAMgI,IAEP,IAAXG,IAEAe,OAAOkC,QAAUpL,MDrHzB,EAEIsE,OAAUuD,EACVI,UAAaa,SAASuC,KACtBlD,QAAU,EACVD,OAAUoD,EACVlD,OAAS,EACTrG,MAEIoB,MAAS,IACTC,OAAU","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n","function Direction(direction) {\n\n    this.name = 'direction';\n\n    this.direction = direction;\n}\n\nexport {Direction};\n","function Entity(name, components) {\n\n    function add(components) {\n\n        components.forEach((component) => {\n\n            this.components[component.name] = component;\n        });\n    }\n\n    function get(component) {\n\n        return this.components[component];\n    }\n\n    function has(components) {\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const search = components[iterator];\n            const component = search.replace('not:', '');\n            const exlude = search !== component;\n\n            if (this.components.hasOwnProperty(component) === exlude) {\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function remove(components) {\n\n        for (let iterator = 0, length = components.length; iterator < length; iterator += 1) {\n\n            const component = components[iterator];\n\n            if (this.components.hasOwnProperty(component) === true) {\n\n                delete this.components[component];\n            }\n        }\n    }\n\n    this.components = {};\n    this.name = name;\n\n    this.add = add;\n    this.get = get;\n    this.has = has;\n    this.remove = remove;\n\n    this.add(components)\n}\n\nfunction World(context) {\n\n    function add(entity) {\n\n        this.entities.push(entity);\n    }\n\n    function get(entity) {\n\n        for (let iterator = 0, length = this.entities.length; iterator < length; iterator += 1) {\n\n            const current = this.entities[iterator];\n\n            if (current.name === entity) {\n\n                return current;\n            }\n        }\n    }\n\n    function remove(entity) {\n\n        this.entities.splice(this.entities.indexOf(entity), 1);\n    }\n\n    function system(components, handler, entities = this.entities) {\n\n        entities.forEach((entity) => {\n\n            if (entity.has(components) === true) {\n\n                handler.call(context, entity);\n            }\n        });\n    }\n\n    this.entities = [];\n\n    this.add = add;\n    this.get = get;\n    this.remove = remove;\n    this.system = system;\n}\n\nexport {\n\n    // exports current module as an object\n    World,\n\n    // exports helpers for current module\n    Entity\n};\n","function Spritesheet(spritesheet) {\n\n    this.name = 'spritesheet';\n\n    this.spritesheet = spritesheet;\n}\n\nexport {Spritesheet};\n","function Image(image, size, frame) {\n\n    this.name = 'image';\n\n    this.image = image;\n    this.size = size;\n    this.frame = frame;\n}\n\nexport {Image};\n","import {destroy} from './destroy.js';\nimport {render} from './render.js';\nimport {setup} from './setup.js';\nimport {start} from './start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './destroy.js',\n        './render.js',\n        './setup.js',\n        './start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, render, setup, start, update};\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","function destroy() {\n\n    console.log('destroy loading scene');\n    console.log('-------');\n\n    delete this.state.redirect;\n}\n\nexport {destroy};\n","function render() {\n\n    // console.log('render loading scene');\n\n    this.context.fillStyle = '#181a1f';\n    this.context.fillRect(0, 0, this.size.width, this.size.height);\n\n    this.context.font = '16px Courier New';\n    this.context.textAlign = 'start';\n    this.context.textBaseline = 'top';\n    this.context.fillStyle = '#6b717d';\n    this.context.fillText('/ Theatre', 8, 8);\n    this.context.fillStyle = '#d7dae0';\n\n    this.context.fillText('$ preloading assets...', 8, 32);\n\n    if (this.preloading === false) {\n\n        this.context.fillText('$ preloading completed', 8, 32 + 24);\n        this.context.fillText('$ loading demo scene...', 8, 32 + 24 + 24);\n    }\n}\n\nexport {render};\n","function setup() {\n\n    console.log('setup loading scene');\n}\n\nexport {setup};\n","function start() {\n\n    console.log('start loading scene');\n\n    this.state.redirect = false;\n}\n\nexport {start};\n","function update() {\n\n    // console.log('update loading scene');\n\n    if (this.preloading === false && this.state.redirect === false) {\n\n        setTimeout(() => {\n\n            this.load('demo');\n\n        }, 3000);\n\n        this.state.redirect = true;\n    }\n}\n\nexport {update};\n","import {destroy} from './destroy.js';\nimport {render} from './render.js';\nimport {setup} from './setup.js';\nimport {start} from './start.js';\nimport {update} from './update.js';\n\nif (typeof module.hot !== 'undefined') {\n\n    module.hot.accept([\n\n        './destroy.js',\n        './render.js',\n        './setup.js',\n        './start.js',\n        './update.js'\n    ]);\n}\n\nexport {destroy, render, setup, start, update};\n","function destroy() {\n\n    console.log('destroy demo scene');\n\n    this.keyboard.destroy();\n\n    delete this.inputs;\n    delete this.world;\n\n    delete this.keyboard;\n\n    console.log('-------');\n}\n\nexport {destroy};\n","function Position(x, y) {\n\n    this.name = 'position';\n\n    this.x = x;\n    this.y = y;\n}\n\nexport {Position};\n","import {Entity, World} from 'modules/world.js';\n\nimport {Alphabet} from 'components/demo/alphabet.js';\nimport {Direction} from 'components/demo/direction.js';\nimport {Framerate} from 'components/demo/framerate.js';\nimport {Image} from 'components/demo/image.js';\nimport {Input} from 'components/demo/input.js';\nimport {Position} from 'components/demo/position.js';\nimport {Spritesheet} from 'components/demo/spritesheet.js';\nimport {Text} from 'components/demo/text.js';\n\nfunction start() {\n\n    console.log('start demo scene');\n\n    this.inputs.length = 0;\n    this.world = new World(this);\n\n    this.world.add(new Entity('hero', [\n\n        new Direction('DOWN'),\n        new Image(this.assets.images.demo['wizard'](), [32, 32], [3, 2]),\n        new Input(['KEY_UP', 'KEY_RIGHT', 'KEY_DOWN', 'KEY_LEFT']),\n        new Position(this.size.width / 2 - 16, this.size.height / 2 - 16),\n        new Spritesheet(this.assets.datasets.demo['wizard']())\n    ]));\n\n    this.world.add(new Entity('framerate', [\n\n        new Position(8, 8),\n        new Text('fps:60'),\n        new Framerate(),\n        new Alphabet(this.assets.images.demo['font'](), [16, 32]),\n        new Spritesheet(this.assets.datasets.demo['font']())\n    ]));\n}\n\nexport {start};\n","function Input(inputs) {\n\n    this.name = 'input';\n\n    this.inputs = inputs;\n}\n\nexport {Input};\n","function Text(text) {\n\n    this.name = 'text';\n\n    this.text = text;\n}\n\nexport {Text};\n","function Framerate() {\n\n    this.name = 'framerate';\n\n    this.elapsed = 0;\n    this.frames = 0;\n}\n\nexport {Framerate};\n","function Alphabet(image, size) {\n\n    this.name = 'alphabet';\n\n    this.image = image;\n    this.size = size;\n}\n\nexport {Alphabet};\n","function animate(entity) {\n\n    const animationComponent = entity.get('animation');\n\n    if (animationComponent.frames.length > 1) {\n\n        animationComponent.elapsed += this.delta.update;\n\n        const duration = 1000 / animationComponent.framerate;\n\n        while (animationComponent.elapsed >= duration) {\n\n            animationComponent.elapsed -= duration;\n            animationComponent.frame = (animationComponent.frame === animationComponent.frames.length - 1) ? 0 : animationComponent.frame + 1;\n            animationComponent.current = animationComponent.frames[animationComponent.frame];\n        }\n    }\n}\n\nexport {animate};\n","function Animation(frames, framerate) {\n\n    this.name = 'animation';\n\n    this.framerate = framerate || 8;\n    this.frames = frames;\n\n    this.frame = 0;\n    this.current = this.frames[this.frame];\n    this.elapsed = 0;\n}\n\nexport {Animation};\n","function Run() {\n\n    this.name = 'run';\n}\n\nexport {Run};\n","import {Animation} from 'components/demo/animation.js';\nimport {Direction} from 'components/demo/direction.js';\nimport {Image} from 'components/demo/image.js';\nimport {Run} from 'components/demo/run.js';\nimport {Spritesheet} from 'components/demo/spritesheet.js';\n\nfunction input(entity) {\n\n    this.inputs.forEach((input) => {\n\n        const directionComponent = entity.get('direction');\n        const imageComponent = entity.get('image');\n        const inputComponent = entity.get('input');\n        const spritesheetComponent = entity.get('spritesheet');\n\n        if (inputComponent.inputs.indexOf(input.action) !== -1\n        && input.state === 'DOWN') {\n\n            switch (input.action) {\n\n                case 'KEY_UP':\n\n                    entity.add([\n\n                        new Run(),\n                        new Direction('UP'),\n                        new Animation(spritesheetComponent.spritesheet['RUN_UP'])\n                    ]);\n\n                break;\n\n                case 'KEY_RIGHT':\n\n                    entity.add([\n\n                        new Run(),\n                        new Direction('RIGHT'),\n                        new Animation(spritesheetComponent.spritesheet['RUN_RIGHT'])\n                    ]);\n\n                break;\n\n                case 'KEY_DOWN':\n\n                    entity.add([\n\n                        new Run(),\n                        new Direction('DOWN'),\n                        new Animation(spritesheetComponent.spritesheet['RUN_DOWN'])\n                    ]);\n\n                break;\n\n                case 'KEY_LEFT':\n\n                    entity.add([\n\n                        new Run(),\n                        new Direction('LEFT'),\n                        new Animation(spritesheetComponent.spritesheet['RUN_LEFT'])\n                    ]);\n\n                break;\n            }\n        }\n\n        else if (entity.has(['run']) === true\n        && inputComponent.inputs.indexOf(input.action) !== -1\n        && input.state === 'UP') {\n\n            switch (input.action) {\n\n                case 'KEY_UP':\n\n                    if (directionComponent.direction === 'UP') {\n\n                        entity.remove(['animation', 'run']);\n                        imageComponent.frame = spritesheetComponent.spritesheet['IDLE_UP'];\n                    }\n\n                break;\n\n                case 'KEY_RIGHT':\n\n                    if (directionComponent.direction === 'RIGHT') {\n\n                        entity.remove(['animation', 'run']);\n                        imageComponent.frame = spritesheetComponent.spritesheet['IDLE_RIGHT'];\n                    }\n\n                break;\n\n                case 'KEY_DOWN':\n\n                    if (directionComponent.direction === 'DOWN') {\n\n                        entity.remove(['animation', 'run']);\n                        imageComponent.frame = spritesheetComponent.spritesheet['IDLE_DOWN'];\n                    }\n\n                break;\n\n                case 'KEY_LEFT':\n\n                    if (directionComponent.direction === 'LEFT') {\n\n                        entity.remove(['animation', 'run']);\n                        imageComponent.frame = spritesheetComponent.spritesheet['IDLE_LEFT'];\n                    }\n\n                break;\n            }\n        }\n    });\n}\n\nexport {input};\n","function reframe(entity) {\n\n    entity.get('image').frame = entity.get('animation').current;\n}\n\nexport {reframe};\n","import {system} from 'modules/world.js';\n\nimport {animate} from 'systems/demo/animate.js';\nimport {input} from 'systems/demo/input.js';\nimport {reframe} from 'systems/demo/reframe.js';\n\nfunction update() {\n\n    // console.log('update demo scene');\n\n    this.world.system(['input'], input);\n    this.world.system(['animation'], animate);\n    this.world.system(['animation', 'image'], reframe);\n\n    this.inputs.length = 0;\n}\n\nexport {update};\n","function framerate(entity) {\n\n    const framerateComponent = entity.get('framerate');\n\n    framerateComponent.elapsed += this.delta.render;\n    framerateComponent.frames += 1;\n\n    if (framerateComponent.elapsed >= 1000) {\n\n        entity.get('text').text = 'fps:' + Math.round(framerateComponent.frames * 1000 / framerateComponent.elapsed);\n        framerateComponent.elapsed = 0;\n        framerateComponent.frames = 0;\n    }\n}\n\nexport {framerate};\n","function image(entity) {\n\n    const imageComponent = entity.get('image');\n    const positionComponent = entity.get('position');\n\n    this.context.drawImage(\n\n        imageComponent.image,\n        imageComponent.frame[0] * imageComponent.size[0], imageComponent.frame[1] * imageComponent.size[1], imageComponent.size[0], imageComponent.size[1],\n        positionComponent.x, positionComponent.y, imageComponent.size[0], imageComponent.size[1]\n    );\n}\n\nexport {image};\n","function text(entity) {\n\n    const alphabetComponent = entity.get('alphabet');\n    const positionComponent = entity.get('position');\n    const spritesheetComponent = entity.get('spritesheet');\n    const textComponent = entity.get('text');\n\n    textComponent.text.split('').forEach((character, index) => {\n\n        this.context.drawImage(\n\n            alphabetComponent.image,\n            spritesheetComponent.spritesheet[character][0] * alphabetComponent.size[0], spritesheetComponent.spritesheet[character][1] * alphabetComponent.size[1], alphabetComponent.size[0], alphabetComponent.size[1],\n            positionComponent.x + index * alphabetComponent.size[0], positionComponent.y, alphabetComponent.size[0], alphabetComponent.size[1]\n        );\n    });\n}\n\nexport {text};\n","import {system} from 'modules/world.js';\n\nimport {framerate} from 'systems/demo/framerate.js';\nimport {image} from 'systems/demo/image.js';\nimport {text} from 'systems/demo/text.js';\n\nfunction render() {\n\n    // console.log('render demo scene');\n\n    this.context.fillStyle = '#a8c0b0';\n    this.context.fillRect(0, 0, this.size.width, this.size.height);\n\n    this.world.system(['framerate'], framerate);\n    this.world.system(['image', 'position'], image);\n    this.world.system(['alphabet', 'position'], text);\n}\n\nexport {render};\n","const keynames = [];\n\nkeynames[9] = 'TAB';\nkeynames[13] = 'ENTER';\nkeynames[16] = 'SHIFT';\nkeynames[17] = 'CTRL';\nkeynames[18] = 'ALT';\nkeynames[27] = 'ESC';\nkeynames[32] = 'SPACE';\n\nkeynames[37] = 'LEFT';\nkeynames[38] = 'UP';\nkeynames[39] = 'RIGHT';\nkeynames[40] = 'DOWN';\n\nkeynames[48] = 'ZERO';\nkeynames[49] = 'ONE';\nkeynames[50] = 'TWO';\nkeynames[51] = 'THREE';\nkeynames[52] = 'FOUR';\nkeynames[53] = 'FIVE';\nkeynames[54] = 'SIX';\nkeynames[55] = 'SEVEN';\nkeynames[56] = 'EIGHT';\nkeynames[57] = 'NINE';\n\nkeynames[65] = 'A';\nkeynames[66] = 'B';\nkeynames[67] = 'C';\nkeynames[68] = 'D';\nkeynames[69] = 'E';\nkeynames[70] = 'F';\nkeynames[71] = 'G';\nkeynames[72] = 'H';\nkeynames[73] = 'I';\nkeynames[74] = 'J';\nkeynames[75] = 'K';\nkeynames[76] = 'L';\nkeynames[77] = 'M';\nkeynames[78] = 'N';\nkeynames[79] = 'O';\nkeynames[80] = 'P';\nkeynames[81] = 'Q';\nkeynames[82] = 'R';\nkeynames[83] = 'S';\nkeynames[84] = 'T';\nkeynames[85] = 'U';\nkeynames[86] = 'V';\nkeynames[87] = 'W';\nkeynames[88] = 'X';\nkeynames[89] = 'Y';\nkeynames[90] = 'Z';\n\n// exports current module as an array\nexport {keynames};\n","const TAB = 9;\nconst ENTER = 13;\nconst SHIFT = 16;\nconst CTRL = 17;\nconst ALT = 18;\nconst ESC = 27;\nconst SPACE = 32;\n\nconst LEFT = 37;\nconst UP = 38;\nconst RIGHT = 39;\nconst DOWN = 40;\n\nconst ZERO = 48;\nconst ONE = 49;\nconst TWO = 50;\nconst THREE = 51;\nconst FOUR = 52;\nconst FIVE = 53;\nconst SIX = 54;\nconst SEVEN = 55;\nconst EIGHT = 56;\nconst NINE = 57;\n\nconst A = 65;\nconst B = 66;\nconst C = 67;\nconst D = 68;\nconst E = 69;\nconst F = 70;\nconst G = 71;\nconst H = 72;\nconst I = 73;\nconst J = 74;\nconst K = 75;\nconst L = 76;\nconst M = 77;\nconst N = 78;\nconst O = 79;\nconst P = 80;\nconst Q = 81;\nconst R = 82;\nconst S = 83;\nconst T = 84;\nconst U = 85;\nconst V = 86;\nconst W = 87;\nconst X = 88;\nconst Y = 89;\nconst Z = 90;\n\nexport {\n\n    // exports control keys\n    TAB, ENTER, SHIFT, CTRL, ALT, ESC, SPACE,\n\n    // exports arrow keys\n    LEFT, UP, RIGHT, DOWN,\n\n    // exports numeric keys\n    ZERO, ONE, TWO, THREE, FOUR, FIVE, SIX, SEVEN, EIGHT, NINE,\n\n    // exports alhabetic keys\n    A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z\n};\n","import {Keyboard} from 'modules/keyboard.js';\nimport {DOWN, LEFT, RIGHT, UP} from 'modules/keycodes.js';\n\nfunction setup() {\n\n    console.log('setup demo scene');\n\n    this.inputs = [];\n\n    this.keyboard = new Keyboard([UP, RIGHT, DOWN, LEFT], this.inputs);\n}\n\nexport {setup};\n","import {keynames} from './keynames.js';\n\nfunction Keyboard(codes, inputs) {\n\n    const names = [];\n    const states = {};\n\n    function blur() {\n\n        for (let state in states) {\n\n            if (states.hasOwnProperty(state)\n            && states[state] === true) {\n\n                states[state] = false;\n\n                inputs.push({\n\n                    'type': 'KEYBOARD',\n                    'action': state,\n                    'state': 'UP'\n                });\n            }\n        }\n    }\n\n    function destroy() {\n\n        removeEventListener('blur', blur);\n        removeEventListener('keydown', keydown);\n        removeEventListener('keyup', keyup);\n    }\n\n    function keydown(event) {\n\n        const code = event.keyCode;\n        const index = codes.indexOf(code);\n\n        if (index !== -1\n        && states[names[index]] === false) {\n\n            event.preventDefault();\n\n            states[names[index]] = true;\n\n            inputs.push({\n\n                'type': 'KEYBOARD',\n                'action': names[index],\n                'state': 'DOWN'\n            });\n        }\n    }\n\n    function keyup(event) {\n\n        const code = event.keyCode;\n        const index = codes.indexOf(code);\n\n        if (index !== -1\n        && states[names[index]] === true) {\n\n            event.preventDefault();\n\n            states[names[index]] = false;\n\n            inputs.push({\n\n                'type': 'KEYBOARD',\n                'action': names[index],\n                'state': 'UP'\n            });\n        }\n    }\n\n    function setup() {\n\n        addEventListener('blur', blur);\n        addEventListener('keydown', keydown);\n        addEventListener('keyup', keyup);\n    }\n\n    codes.forEach((code) => {\n\n        if (typeof keynames[code] !== 'undefined') {\n\n            const name = 'KEY_' + keynames[code];\n\n            codes.push(code);\n            names.push(name);\n\n            states[name] = false;\n        }\n    });\n\n    setup.call(this);\n\n    this.destroy = destroy;\n    this.setup = setup;\n}\n\n// exports current module as an object\nexport {Keyboard};\n","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","const datasets = [\n\n    {\n        'name': 'font',\n        'scope': 'demo',\n        'source': require('./demo/font.json'),\n        'type': 'dataset'\n    },\n    {\n        'name': 'wizard',\n        'scope': 'demo',\n        'source': require('./demo/wizard.json'),\n        'type': 'dataset'\n    }\n];\n\nexport {datasets};\n","const images = [\n\n    {\n        'name': 'font',\n        'scope': 'demo',\n        'source': require('./demo/font-16x32@2x.png'),\n        'type': 'image'\n    },\n    {\n        'name': 'wizard',\n        'scope': 'demo',\n        'source': require('./demo/wizard-16x16@2x.png'),\n        'type': 'image'\n    }\n];\n\nexport {images};\n","import {datasets} from './datasets/index.js';\nimport {images} from './images/index.js';\nimport {sounds} from './sounds/index.js';\n\nconst assets = [\n\n    ...datasets,\n    ...images,\n    ...sounds\n];\n\nexport {assets};\n","import {assets} from 'assets/index.js';\nimport * as scenes from 'scenes/index.js';\n\nimport {Theatre} from 'core/theatre.js';\n\nnew Theatre({\n\n    'assets': assets,\n    'container': document.body,\n    'expose': true,\n    'scenes': scenes,\n    'sharp': true,\n    'size': {\n\n        'width': 320,\n        'height': 288\n    }\n});\n","import {Canvas} from 'core/canvas.js';\nimport {Loop} from 'core/loop.js';\nimport {preload} from 'core/preload.js';\n\nfunction Theatre(config) {\n\n    const {assets, container, scenes, size} = config;\n\n    const expose = config.expose || false;\n    const framerate = config.framerate || 60;\n    const sharp = config.sharp || false;\n    const speed = config.speed || 1;\n\n    let loading = null;\n    let restarting = false;\n\n    function initialize() {\n\n        const canvas = new Canvas('2d', 'theatre', size.width, size.height);\n\n        if (sharp === true) {\n\n            canvas.sharp();\n        }\n\n        container.appendChild(canvas.element);\n\n        this.container = container;\n        this.context = canvas.context;\n        this.element = canvas.element;\n\n        this.assets = {};\n        this.delta = {};\n        this.delta.render = 0;\n        this.delta.update = 0;\n\n        this.scene = this.scenes.loading;\n        this.scene.setup.call(this);\n        this.scene.start.call(this);\n\n        const loop = new Loop(framerate, speed);\n\n        loop.update((timeframe) => {\n\n            this.delta.update = timeframe;\n            this.scene.update.call(this);\n\n            if (restarting === true) {\n\n                this.scene.start.call(this);\n\n                restarting = false;\n\n                return;\n            }\n\n            if (loading !== null) {\n\n                this.scene.destroy.call(this);\n                this.scene = this.scenes[loading];\n                this.scene.setup.call(this);\n                this.scene.start.call(this);\n\n                loading = null;\n\n                return;\n            }\n        });\n\n        loop.render((timeframe) => {\n\n            this.delta.render = timeframe;\n            this.scene.render.call(this);\n        });\n\n        preload(assets, (assets) => {\n\n            assets.forEach((asset) => {\n\n                if (typeof this.assets[asset.type + 's'] === 'undefined') {\n\n                    this.assets[asset.type + 's'] = {};\n                }\n\n                if (typeof this.assets[asset.type + 's'][asset.scope] === 'undefined') {\n\n                    this.assets[asset.type + 's'][asset.scope] = {};\n                }\n\n                this.assets[asset.type + 's'][asset.scope][asset.name] = asset.getter;\n            });\n\n            this.preloading = false;\n        });\n\n        this.loop = loop;\n        this.preloading = true;\n    }\n\n    function load(scene) {\n\n        loading = scene;\n    }\n\n    function restart() {\n\n        restarting = true;\n    }\n\n    this.preloading = false;\n    this.scenes = scenes;\n    this.size = size;\n    this.state = {};\n    this.version = '0.19.0';\n\n    this.load = load;\n    this.restart = restart;\n\n    initialize.call(this, config);\n\n    if (expose === true) {\n\n        window.theatre = this;\n    }\n}\n\n// exports current module as an object\nexport {Theatre};\n","function Canvas(type, identifier, width, height) {\n\n    const element = document.createElement('canvas');\n    const context = element.getContext(type);\n    const ratio = window.devicePixelRatio || 1;\n\n    function sharp() {\n\n        this.element.style.imageRendering = '-moz-crisp-edges';\n        this.element.style.imageRendering = '-webkit-crisp-edges';\n        this.element.style.imageRendering = 'crisp-edges';\n        this.element.style.imageRendering = 'pixelated';\n        this.context.imageSmoothingEnabled = false;\n    }\n\n    element.setAttribute('id', identifier);\n    element.setAttribute('height', ratio * height);\n    element.setAttribute('width', ratio * width);\n\n    element.style.height = height + 'px';\n    element.style.width = width + 'px';\n\n    context.scale(ratio, ratio);\n\n    this.context = context;\n    this.element = element;\n    this.sharp = sharp;\n}\n\n// exports current module as an object\nexport {Canvas};\n","function Loop(framerate = 60, speed = 1) {\n\n    let elapsedTime = 0;\n    let lastRender = null;\n    let lastUpdate = null;\n\n    function render(handler) {\n\n        const currentRender = Date.now();\n\n        if (lastRender !== null) {\n\n            handler(currentRender - lastRender);\n        }\n\n        // call user's render handler on each available frame\n        requestAnimationFrame(this.render.bind(this, handler));\n\n        lastRender = currentRender;\n    }\n\n    function update(handler) {\n\n        const currentUpdate = Date.now();\n\n        if (lastUpdate !== null) {\n\n            // define elapsed time since last update\n            elapsedTime += currentUpdate - lastUpdate;\n        }\n\n        // call user's update handler matching timeframe, speed and fixing browser time handling\n        while (elapsedTime >= 1000 / this.framerate / this.speed) {\n\n            // define elapsed time since last user's update handler matching timeframe and speed\n            elapsedTime -= 1000 / this.framerate / this.speed;\n\n            handler(1000 / this.framerate);\n        }\n\n        lastUpdate = currentUpdate;\n\n        // call update loop at least 60 times per second to quickly catch framerate or speed changes\n        setTimeout(this.update.bind(this, handler), 1000 / Math.max(this.framerate, 60));\n    }\n\n    this.framerate = framerate;\n    this.speed = speed;\n\n    this.render = render;\n    this.update = update;\n}\n\n// exports current module as an object\nexport {Loop};\n","function preload(assets, handler) {\n\n    let promises = [];\n\n    // preloads each asset\n    assets.forEach(function (asset) {\n\n        // creates a promise for current asset preloading\n        const promise = new Promise(function (resolve, reject) {\n\n            // if current asset is a dataset then preload it\n            if (asset.type === 'dataset') {\n\n                asset.getter = () => asset.source;\n\n                resolve(asset);\n            }\n\n            // if current asset is an image then preload it\n            if (asset.type === 'image') {\n\n                const image = new Image();\n\n                image.src = asset.source;\n\n                // when current image is loaded then resolve current promise\n                image.onload = function () {\n\n                    asset.getter = () => image;\n\n                    resolve(asset);\n                };\n            }\n\n            // if current asset is a sound then preload it\n            else if (asset.type === 'sound') {\n\n                const sound = new Audio(asset.source);\n\n                // when current sound is loaded then resolve current promise\n                sound.oncanplaythrough = function () {\n\n                    asset.getter = () => sound.cloneNode();\n\n                    resolve(asset);\n                };\n            }\n        });\n\n        promises.push(promise);\n    });\n\n    // call user's success handler when all assets are preloaded\n    Promise.all(promises).then(handler);\n}\n\n// exports current module as a function\nexport {preload};\n"],"sourceRoot":""}